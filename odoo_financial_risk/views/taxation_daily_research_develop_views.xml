<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--日常研发加计扣除-->
    <record model="ir.ui.view" id="daily_research_develop_deduct_tree">
        <field name="name">日常研发加计扣除.tree</field>
        <field name="model">daily.research.develop.deduct</field>
        <field name="arch" type="xml">
            <list string="日常研发加计扣除">
                <field name="sequence" optional="show"/>
                <field name="technical_committees" options="{'no_open': True, 'no_create': True}" optional="show"/>
                <field name="name" optional="show"/>
                <field name="project_code" optional="hide"/>
                <field name="budget_amount" optional="show"/>
                <field name="invoice_amount_exclude_tax" optional="show"/>
                <field name="entrusted_committees" options="{'no_open': True, 'no_create': True}" optional="show"/>
                <field name="related_partner" optional="show"/>
                <field name="technological_partner" optional="show"/>
                <field name="related_entrusted_auxiliary_amount_1" optional="show"/>
                <field name="related_entrusted_auxiliary_amount_2" optional="show"/>
                <field name="note" optional="show"/>
                <field name="company_id" optional="hide"/>
                <field name="id" optional="hide"/>
            </list>
        </field>
    </record>

    <record model="ir.ui.view" id="daily_research_develop_deduct_form">
        <field name="name">日常研发加计扣除.form</field>
        <field name="model">daily.research.develop.deduct</field>
        <field name="arch" type="xml">
            <form string="日常研发加计扣除">
                <sheet>
                    <widget name="web_ribbon" title="已存档" bg_color="text-bg-danger" invisible="active"/>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1><field name="name" string="项目名称" placeholder="..."/></h1>
                    </div>
                    <group name="research_header">
                        <group>
                            <field name="project_code"/>
                            <field name="sequence" invisible="1"/>
                            <field name="technical_committees" options="{'no_open': True, 'no_create': True}"/>
                            <field name="budget_amount"/>
                            <field name="invoice_amount_exclude_tax"/>
                            <field name="entrusted_committees" options="{'no_open': True, 'no_create': True}"/>
                        </group>
                        <group>
                            <field name="related_partner"/>
                            <field name="technological_partner"/>
                            <field name="related_entrusted_auxiliary_amount_1"/>
                            <field name="related_entrusted_auxiliary_amount_2"/>
                        </group>
                        <field name="note"/>
                    </group>
                    <notebook>
                        <page string="备注" name="description">
                            <field name="note"/>
                        </page>
                    </notebook>
                    <field name="company_id" invisible="1"/>
                    <field name="id" invisible="1"/>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="daily_research_develop_deduct_kanban" model="ir.ui.view">
        <field name="name">日常研发加计扣除</field>
        <field name="model">daily.research.develop.deduct</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile custom-kanban" create="0" default_order="id">
                <field name="name" />
                <field name="technical_committees"/>
                <field name="entrusted_committees"/>
                <field name="related_partner"/>
                <field name="technological_partner"/>
                <field name="budget_amount"/>
                <field name="invoice_amount_exclude_tax"/>
                <field name="note"/>
                <field name="project_code"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click oe_semantic_html_override custom-kanban-card">
                            <div class="oe_kanban_content">
                                <!-- 顶部标题区域 -->
                                <div class="kanban-header bg-light">
                                    <strong class="project-name text-dark"><field name="name"/></strong>
                                </div>
                                <!-- 主要内容区域 -->
                                <div class="o_kanban_record_body p-3">
                                    <!-- 第一行 - 关键信息 -->
                                    <div class="d-flex justify-content-between mb-2">
                                        <div class="kanban-info-item">
                                            <small class="text-muted">项目编码：<field name="project_code"/></small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <div class="kanban-info-item">
                                            <small class="text-muted">归口单位：<field name="technical_committees"/></small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <div class="kanban-info-item">
                                            <small class="text-muted">受托单位：<field name="entrusted_committees"/></small>
                                        </div>
                                    </div>

                                    <!-- 第二行 - 状态信息 -->
                                    <div class="d-flex justify-content-between mb-2">
                                        <div class="kanban-status-item">
                                            <small class="text-muted">关联方：</small> <field name="related_partner"/>
                                        </div>
                                        <div class="kanban-status-item">
                                            <small class="text-muted">技术开发合同：</small><field name="technological_partner"/>
                                        </div>
                                    </div>

                                    <!-- 第三行 - 金额信息 -->
                                    <div class="d-flex justify-content-between">
                                        <div class="kanban-amount-item">
                                            <small class="text-muted">预算金额：<field name="budget_amount"/> 万元</small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <div class="kanban-amount-item">
                                            <small class="text-muted">开票不含税金额：<field name="invoice_amount_exclude_tax"/> 万元</small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <div class="kanban-amount-item">
                                            <small class="text-muted">关联方受托辅助账1-5项合计：<field name="related_entrusted_auxiliary_amount_1"/> 万元</small>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <div class="kanban-amount-item">
                                            <small class="text-muted">关联方受托辅助账第6项合计：<field name="related_entrusted_auxiliary_amount_2"/> 万元</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="action_daily_research_develop_deduct" model="ir.actions.act_window">
        <field name="name">日常研发加计扣除</field>
        <field name="res_model">daily.research.develop.deduct</field>
        <field name="view_mode">list,form,kanban</field>
        <field name="search_view_id" ref=""/>
        <field name="view_ids"
           eval="[(5, 0, 0),
                  (0, 0, {'view_mode': 'list', 'view_id': ref('daily_research_develop_deduct_tree')}),
                  (0, 0, {'view_mode': 'form', 'view_id': ref('daily_research_develop_deduct_form')}),
                  (0, 0, {'view_mode': 'kanban', 'view_id': ref('daily_research_develop_deduct_kanban')}),
                  ]"/>
    </record>

    <!--日常研发加计扣除清单-->
    <record model="ir.ui.view" id="daily_research_develop_list_tree">
        <field name="name">日常研发加计扣除清单.tree</field>
        <field name="model">daily.research.develop.list</field>
        <field name="arch" type="xml">
            <list string="日常研发加计扣除清单">
                <field name="sequence" optional="show"/>
                <field name="technical_committees" options="{'no_open': True, 'no_create': True}" optional="show"/>
                <field name="name" optional="show"/>
                <field name="project_code" optional="show"/>
                <field name="budget_amount" optional="show"/>
                <field name="invoice_amount_exclude_tax" optional="show"/>
                <field name="entrusted_committees" options="{'no_open': True, 'no_create': True}" optional="show"/>
                <field name="related_partner" optional="show"/>
                <field name="technological_partner" optional="show"/>
                <field name="note" optional="hide"/>
                <field name="period_date" optional="show"/>
                <field name="voucher_type" optional="show"/>
                <field name="voucher_code" optional="show"/>
                <field name="period_date_2" optional="show"/>
                <field name="payment_voucher_type" optional="show"/>
                <field name="payment_voucher_code" optional="show"/>
                <field name="payment_amount" optional="show"/>
                <field name="digital_code" optional="show"/>
                <field name="payment_part" optional="show"/>
                <field name="company_id" optional="hide"/>
                <field name="id" optional="hide"/>
            </list>
        </field>
    </record>

    <record model="ir.ui.view" id="daily_research_develop_list_form">
        <field name="name">日常研发加计扣除清单.form</field>
        <field name="model">daily.research.develop.list</field>
        <field name="arch" type="xml">
            <form string="日常研发加计扣除清单">
                <sheet>
                    <widget name="web_ribbon" title="已存档" bg_color="text-bg-danger" invisible="active"/>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1><field name="name" string="项目名称" options="{'no_open': True, 'no_create': True}"/></h1>
                    </div>
                    <group name="research_header" string="项目信息">
                        <group>
                            <field name="project_code"/>
                            <field name="sequence" invisible="1"/>
                            <field name="technical_committees" options="{'no_open': True, 'no_create': True}"/>
                            <field name="budget_amount"/>
                            <field name="invoice_amount_exclude_tax"/>
                            <field name="entrusted_committees" options="{'no_open': True, 'no_create': True}"/>
                        </group>
                        <group>
                            <field name="related_partner"/>
                            <field name="technological_partner"/>
                        </group>
                    </group>
                    <group name="research_payment" string="支付信息">
                        <group>
                            <field name="period_date"/>
                            <field name="voucher_type"/>
                            <field name="voucher_code"/>
                        </group>
                        <group>
                            <field name="period_date_2"/>
                            <field name="payment_voucher_type"/>
                            <field name="payment_voucher_code"/>
                            <field name="payment_amount"/>
                        </group>
                    </group>
                    <group name="research_bill_information" string="票据信息">
                        <group>
                            <field name="digital_code"/>
                        </group>
                        <group>
                            <field name="payment_part"/>
                        </group>
                    </group>
                    <group string="备注">
                        <div>
                            1.如受托方属于关联方，请根据受托方提供辅助账填写I-J列金额；如受托方不属于关联方，则无需填写。<br/>
                            2.如受托方未提供辅助账，请根据12月底前项目列支成本金额测算，尽量控制数据偏差。<br/>
                            3.请各单位将项目所有受托方列示，务必不要删减。<br/>
                            4.请根据技术合同登记认定结果填列H列。如认定为技术咨询、技术服务合同、技术转让合同，请在H列填否；如认定为技术开发，请填是。
                        </div>
                    </group>
                    <field name="company_id" invisible="1"/>
                    <field name="id" invisible="1"/>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="action_daily_research_develop_list" model="ir.actions.act_window">
        <field name="name">日常研发加计扣除清单</field>
        <field name="res_model">daily.research.develop.list</field>
        <field name="view_mode">list,form</field>
        <field name="search_view_id" ref=""/>
        <field name="view_ids"
           eval="[(5, 0, 0),
                  (0, 0, {'view_mode': 'list', 'view_id': ref('daily_research_develop_list_tree')}),
                  (0, 0, {'view_mode': 'form', 'view_id': ref('daily_research_develop_list_form')}),
                  ]"/>
    </record>
</odoo>